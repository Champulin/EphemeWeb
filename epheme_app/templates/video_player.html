{% extends "__layout.html" %}

{% block content %}
<h1>
  {{ video.title }}
</h1>
<div class="player-container">
  <div id="ytplayer"/>
</div>
<p>
  {{ video.description }}
</p>

<script>
  // Load the IFrame Player API code asynchronously.
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  var id = new URL("{{ video.video_url }}").searchParams.get("v");
  

  // Replace the 'ytplayer' element with an <iframe> and
  // YouTube player after the API code downloads.
  var player;
  function onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayer', {
      height: '100%',
      width: '100%',
      videoId: id,
      playerVars: { 'modestbranding': 1, 'rel': 0, 'controls': 1 },
    });
  }
</script>

<style>
  .player-container {
    aspect-ratio: 16/9;
  }

  main {
    flex-grow: 1;
    display: flex;
    justify-self: center;
    flex-direction: column;
    justify-content: center;
    align-content: center;
  }
</style>
{% endblock %}